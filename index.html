<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset = UTF-8>
        <title> Tâb </title>

        <link rel = "stylesheet" href = "css/base.css">
        <link rel = "stylesheet" href = "css/registerScreen.css">
        <link rel = "stylesheet" href = "css/rulesScreen.css">
        <link rel = "stylesheet" href = "css/messages.css">
        <link rel = "stylesheet" href = "css/dice.css">
        <link rel = "stylesheet" href = "css/board.css">
        <link rel = "stylesheet" href = "css/playScreen.css">
        <link rel = "stylesheet" href = "css/rankingsScreen.css">
        <link rel = "stylesheet" href = "css/settingsScreen.css">

        <link rel = "preconnect" href = "https://fonts.googleapis.com">
        <link rel = "preconnect" href = "https://fonts.gstatic.com" crossorigin>
        <link href = "https://fonts.googleapis.com/css2?family=BBH+Sans+Bogle&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel = "stylesheet">
    </head>

    <body>
        <div id = "header">
            <img alt = "Tâb" src = "assets/logo.png" height = 100>

            <div id = "headerButtonsArea">
                <button id = "showRegisterScreenButton"> Register </button>
                <button id = "showRulesScreenButton"> Rules </button>            
                <button id = "showPlayScreenButton"> Play </button>
                <button id = "showRankingsScreenButton"> Rankings </button>
                <button id = "showSettingsScreenButton"> Settings </button>
            </div>
        </div> 
        
        <div id = "registerScreen" class = "screenSize">
            <div id = "registerBox" class = "box">
                <h1> REGISTER </h1>
                
                <hr>

                <h4> Username </h4>
                <input id = "usernameInput" class = "inputField" type = "text">
                
                <br>

                <h4> Password </h4>
                <input id = "passwordInput" class = "inputField" type = "password">
                
                <br>
                <hr id = "registerHr">
                
                <button id = "registerUserButton"> Register </button>
            </div>
        </div>

        <div id = "rulesScreen" class = "screenSize">
            <div id = "rulesBox" class = "box">
                <h1> GAME RULES </h1>
                
                <hr>

                <h3><u> Board and Pieces </u></h3>
                <p> The board has 4 rows and an odd number of columns (7–15). Each player receives as many pieces as 
                    there are columns, with the user's pieces being placed at the bottom (blue) and the opponent's 
                    pieces at the top (red). The state of each piece can influence the flow of the game, with the 
                    possible states being: "neverMoved", "neverBeenInFourthRow", or "hasBeenInFourthRow".
                </p>
                
                <br>

                <h3><u> Stick Dice </u></h3>
                <p> Four sticks with light and dark faces are used to simulate a dice roll. The number of light faces 
                    facing up determines how many spaces a chosen piece can move (1, 2, 3, or 4). If no light face is 
                    facing up, the dice value is considered 6 (instead of 0). After playing (if possible), the player 
                    must roll the sticks again if the previous result was 1, 4, or 6. 
                </p>

                <br>

                <h3><u> Piece Movement </u></h3>
                <p> The pieces move in a zigzag pattern across the board. On the 1st and 3rd rows, they move from left 
                    to right. On the 2nd and 4th rows, they move from right to left. Before moving a piece, the player 
                    must roll the dice, and the selected piece advances as many spaces as the value shown on the dice.
                    
                    The first time a piece moves, it must be with a value of 1, so the pieces that start moving first 
                    are those on the far right from each player's perspective. Pieces of a given color can never re-enter 
                    their starting row (the one they began from).

                    Each piece can enter the last row (the opponent's starting row) only once during the game. Once 
                    there, they may only be moved if the player no longer has any of their own pieces (of the same 
                    color) in their starting row.

                    A piece can't be moved to a space already occupied by another piece of the same player. If a player 
                    has no possible pieces to move and can't roll again (values 2 or 3), they must skip their turn.
                </p>

                <br>

                <h3><u> Captures </u></h3>
                <p> If there is an opponent's piece on the destination space, it is captured and removed from the board. 
                </p>

                <br>

                <h3><u> End of the Game </u></h3>
                <p> The game ends when one of the players has no pieces left. The winner is the player who still has 
                    pieces on the board. 
                </p>

                <br>

                <h3><u> Implementation Features </u></h3>
                <p> To start a game, the user must press the <b> Start Game! </b> button. </p>
                
                <p> If the user wishes to change the number of board columns, the opponent (AI or Human) and/or which 
                    player rolls the dice first they may do so by clicking the <b> Settings </b> button to perform these changes.
                </p>
                
                <p> If the user wishes to see the number of wins for each player, they can click the <b> Rankings </b>
                    button to view them. 
                </p> 

                <p> If the user wishes to consult the game rules and/or implementation features at any time, they 
                    may do so by clicking the <b> Rules </b> button to see them.
                </p>
                
                <p> If the user wishes to log in / register, they may do so by clicking the <b>Register</b>. </p>
                    
                <p> If the user wishes to return to the game panel, they may do so clicking the <b> Play </b> button. </p>
                
                <br>

                <p> During the game, the user will have four main buttons: </p>
                
                <ul>
                    <li><b>Toggle Numbers On Board</b>: This button shows or hides 
                        the numbers on the board (which represent the position of each piece). It helps to better 
                        understand some of the messages (related to the piece movement) displayed on the left side 
                        during gameplay.
                    </li>

                    <li><b>Forfeit</b>: This button allows the user to leave / surrender the game at any time, granting victory to 
                        the opponent automatically.
                    </li>

                    <li><b>Pass Turn</b>: This button is only active (clickable) when 
                        the user has no possible moves and the dice value does not allow another roll. To assist the user, 
                        a message will appear on the left-side message panel indicating that they should pass their turn.
                    </li>

                    <li><b>Roll Dice</b>: This button rolls the dice and generates a 
                        value based on the number of the dice light faces facing up. It is only disabled (unclickable) 
                        when it is the opponent's turn, or when, during the user's turn, the dice value allows a move 
                        to be made and can't be rolled again.
                    </li>
                </ul>
                
                <br>

                <p> When it is the user's turn to play, after rolling the dice, they must move a piece if there are 
                    valid moves available. Hovering the cursor over one of their pieces will highlight its destination 
                    space in green based on the dice value. Most of the time, clicking the piece will move it instantly 
                    to the highlighted destination. In some cases though, a piece may have two possible moves (two green 
                    destination spaces), in which case the user must first click the piece and then click the desired 
                    destination space.
                </p>

                <br>

                <p> To assist gameplay, there is a panel on the left side of the board displaying messages that track 
                    the history of the game's turns. It is also worth noting that the user will be unable to save the
                    settings or register during a game. To re-register or to save the settings the user must either 
                    finish the match or forfeit / leave it first in order to do so.
                </p>

                <br>

                <p> Additionally, a 2-second delay was added between the start of a turn and the dice roll, as well as 
                    between the dice roll and the AI's move, to clearly display the dice result and the AI's moves.
                </p>

                <br>
                <br>
                
                <p> Welcome to TÂB. Good luck and have fun! </p>            
            </div>
        </div> 

        <div id = "playScreen" class = "screenSize">
            <div id = "messagesArea">
                <div id = "messagesTitle"> MESSAGES </div>

                <ol id = "messagesList"></ol>
                
                <button id = "toggleBoardNumbersButton"> Toggle Board Numbers </button>
            </div>

            <div id = "boardArea"> 
                <div id = "currentOpponentDisplay"></div>

                <div id = "remainingPiecesArea" class = "box">
                    <span id = "bluePiecesRemaining" class = "score"></span>
                    <span class = "dash"> - </span>
                    <span id = "redPiecesRemaining" class = "score"></span>
                </div>

                <div id = "boardContainer"></div>

                <div id = "startGameButtonArea" class = "boardButtonsArea">  
                    <button id = "startGameButton"> Start Game! </button>
                </div>

                <div id = "forfeitPassTurnButtonArea" class = "boardButtonsArea">  
                    <button id = "forfeitButton"> Forfeit </button>
                    <button id = "passTurnButton"> Pass Turn </button>
                </div>

                <div id = "waitingForOpponentDisplay">
                    Waiting for opponent
                    <canvas id = "loadSpinner" width = "70" height = "70"></canvas>
                </div>
            </div>

            <div id = "diceArea">
                <div id = "diceTitle"> DICE </div>
                
                <div id = "diceContent">
                    <div id = "diceCombinationValueDisplay"></div>

                    <div id = "dice">
                        <div class = "dice" id = "dice1"></div>
                        <div class = "dice" id = "dice2"></div>
                        <div class = "dice" id = "dice3"></div>
                        <div class = "dice" id = "dice4"></div>
                    </div>

                    <div id = "diceCombinationValueName"></div>

                    <button id = "rollDiceButton"> Roll Dice </button>
                </div>
            </div>
        </div>

        <div id = "rankingsScreen" class = "screenSize">
            <div id = "rankingsBox" class = "box">
                <h1> RANKINGS </h1>

                <hr>
                
                <p>
                    <b> USER </b>
                    <span class = "floatTextRightRankings">
                        <b> WINS / GAMES </b>
                    </span>
                </p>
                
                <hr>
                
                <div id = "rankingsRows"></div>
            </div>
        </div>

        <div id = "settingsScreen" class = "screenSize">    
            <div id = "settingsBox" class = "box">
                <h1> SETTINGS </h1>
                
                <hr>    
                
                <div class = "marginBottomSettings">
                    <h4> Board size: </h4>
                    COLUMNS:&#9;
                    <select id = "columnSelector" name = "boardColumnsSelector">
                        <option value = "7"> 7 </option>
                        <option value = "9" selected> 9 </option>
                        <option value = "11"> 11 </option>
                        <option value = "13"> 13 </option>
                        <option value = "15"> 15 </option>
                    </select>
                </div>

                <hr>

                <div class = "marginBottomSettings">
                    <h4> Choose your opponent: </h4>
                    AI <input type = "radio" name = "vs" value = "AI">&#9;
                    PLAYER 2 <input type = "radio" name = "vs" value = "Player2" checked = "checked">        
                </div>                

                <hr>

                <div class = "marginBottomSettings">
                    <h4> Who rolls the dice first? </h4>
                    PLAYER 1 <input type = "radio" name = "whoFirst" value = "Blue" checked = "checked">&#9;
                    AI <input type = "radio" name = "whoFirst" value = "Red">
                </div>

                <hr>

                <button id = "saveSettingsButton"> Save </button>
            </div>
        </div>        
    
        <script src = "script.js"></script>
    </body>
</html>
